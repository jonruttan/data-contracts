version: 1
cases:
  - id: SRCONF-CLI-001
    title: conformance fixture sets explicit cli.run harness.entrypoint
    type: cli.run
    argv: ["--help"]
    exit_code: 0
    harness:
      entrypoint: spec_runner.conformance_fixtures:main
    assert: []

  - id: SRCONF-CLI-002
    title: explicit entrypoint is used even if env fallback var is set
    type: cli.run
    argv: ["--json"]
    exit_code: 0
    harness:
      entrypoint: spec_runner.conformance_fixtures:main
      env:
        SPEC_RUNNER_ENTRYPOINT: does.not.exist:main
    assert:
      - target: stdout
        must:
          - contain: ['"ok": true']
