version: 2
id: schema.registry.v2.core
type: core
fields:
  spec_version:
    type: int
    required: true
    since: v2
  schema_ref:
    type: string
    required: true
    since: v2
  harness:
    type: mapping
    required: true
    since: v2
  harness.type:
    type: string
    required: true
    since: v2
  harness.profile:
    type: string
    required: true
    since: v2
  harness.config:
    type: mapping
    required: false
    since: v2
  harness.docs:
    type: list
    required: false
    since: v2
  harness.docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  harness.docs[].summary:
    type: string
    required: true
    since: v2
  harness.docs[].audience:
    type: string
    required: true
    since: v2
  harness.docs[].status:
    type: string
    required: true
    since: v2
    enum: &id001
    - draft
    - active
    - deprecated
    - retired
  harness.docs[].description:
    type: string
    required: false
    since: v2
  harness.docs[].type:
    type: string
    required: false
    since: v2
    enum: &id002
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  harness.docs[].since:
    type: string
    required: false
    since: v2
  harness.docs[].updated_at:
    type: string
    required: false
    since: v2
  harness.docs[].tags:
    type: list
    required: false
    since: v2
  harness.docs[].owners:
    type: list
    required: false
    since: v2
  harness.docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  harness.docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum: &id003
    - owner
    - reviewer
    - approver
  harness.docs[].links:
    type: list
    required: false
    since: v2
  harness.docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum: &id004
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  harness.docs[].links[].ref:
    type: string
    required: true
    since: v2
  harness.docs[].links[].title:
    type: string
    required: false
    since: v2
  harness.docs[].examples:
    type: list
    required: false
    since: v2
  harness.docs[].examples[].title:
    type: string
    required: true
    since: v2
  harness.docs[].examples[].ref:
    type: string
    required: true
    since: v2
  services:
    type: list
    required: false
    since: v2
  services[].type:
    type: string
    required: true
    since: v2
    description: Service type token from service catalog (`io.fs`, `io.http`,
      `io.system`, `io.mysql`, `io.docs`).
  services[].defaults:
    type: mapping
    required: false
    since: v2
    description: Optional defaults merged into each `services[].operations[]` row
      (shallow merge; entry row keys override defaults).
  services[].defaults.direction:
    type: string
    required: false
    since: v2
    enum:
    - input
    - output
    - bidirectional
  services[].defaults.mode:
    type: string
    required: false
    since: v2
  services[].defaults.config:
    type: mapping
    required: false
    since: v2
    description: Default service config mapping for entries in this service block.
      External locators must be declared in `artifacts[]` and referenced by
      artifact id fields; direct locator keys (`path`, `url`, `token_url`,
      `template_path`, `output_path`, `ref`) are invalid.
  services[].defaults.config.source_artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for `read.text` source payloads; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.request.artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for `request.http` single request url; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.requests[].artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for `request.http` scenario request url; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.api_http.auth.oauth.token_artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for oauth token endpoint locator; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.use[].artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for config.use dependency locator; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.docs_generate.template_artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for docs template input; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.config.docs_generate.output_artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for docs output target.
  services[].defaults.config.docs_generate.data_sources[].artifact_id:
    type: string
    required: false
    since: v2
    description: Artifact id for docs data source payload; must resolve to
      `artifacts[].id` where `direction` is `input` or `bidirectional`.
  services[].defaults.imports:
    type: list
    required: false
    since: v2
    description: Canonical service import declarations using mapping rows
      (`names`, optional `as`).
  services[].defaults.imports[].names:
    type: list
    required: true
    since: v2
    description: Declared service import names; each name must be unique per
      service entry after alias resolution and available for resolved
      type+mode in service catalog.
  services[].defaults.imports[].as:
    type: mapping
    required: false
    since: v2
  services[].defaults.docs:
    type: list
    required: false
    since: v2
  services[].defaults.docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  services[].defaults.docs[].summary:
    type: string
    required: true
    since: v2
  services[].defaults.docs[].audience:
    type: string
    required: true
    since: v2
  services[].defaults.docs[].status:
    type: string
    required: true
    since: v2
    enum:
    - draft
    - active
    - deprecated
    - retired
  services[].defaults.docs[].description:
    type: string
    required: false
    since: v2
  services[].defaults.docs[].type:
    type: string
    required: false
    since: v2
    enum:
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  services[].defaults.docs[].since:
    type: string
    required: false
    since: v2
  services[].defaults.docs[].updated_at:
    type: string
    required: false
    since: v2
  services[].defaults.docs[].tags:
    type: list
    required: false
    since: v2
  services[].defaults.docs[].owners:
    type: list
    required: false
    since: v2
  services[].defaults.docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  services[].defaults.docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum:
    - owner
    - reviewer
    - approver
  services[].defaults.docs[].links:
    type: list
    required: false
    since: v2
  services[].defaults.docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum:
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  services[].defaults.docs[].links[].ref:
    type: string
    required: true
    since: v2
  services[].defaults.docs[].links[].title:
    type: string
    required: false
    since: v2
  services[].defaults.docs[].examples:
    type: list
    required: false
    since: v2
  services[].defaults.docs[].examples[].title:
    type: string
    required: true
    since: v2
  services[].defaults.docs[].examples[].ref:
    type: string
    required: true
    since: v2
  services[].operations:
    type: list
    required: true
    since: v2
    description: Non-empty concrete service instance rows.
  services[].operations[].id:
    type: string
    required: true
    since: v2
  services[].operations[].direction:
    type: string
    required: false
    since: v2
    enum:
    - input
    - output
    - bidirectional
  services[].operations[].mode:
    type: string
    required: false
    since: v2
  services[].operations[].config:
    type: mapping
    required: false
    since: v2
  services[].operations[].config.source_artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.request.artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.requests[].artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.api_http.auth.oauth.token_artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.use[].artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.docs_generate.template_artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.docs_generate.output_artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].config.docs_generate.data_sources[].artifact_id:
    type: string
    required: false
    since: v2
  services[].operations[].imports:
    type: list
    required: false
    since: v2
    description: Supports canonical mapping rows (`names`, optional `as`) and
      compact list[string] aliases. Mixed item kinds in one list are invalid.
  services[].operations[].imports[].names:
    type: list
    required: true
    since: v2
  services[].operations[].imports[].as:
    type: mapping
    required: false
    since: v2
  services[].operations[].docs:
    type: list
    required: false
    since: v2
  services[].operations[].docs[].id:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].summary:
    type: string
    required: true
    since: v2
  services[].operations[].docs[].audience:
    type: string
    required: true
    since: v2
  services[].operations[].docs[].status:
    type: string
    required: true
    since: v2
    enum:
    - draft
    - active
    - deprecated
    - retired
  services[].operations[].docs[].description:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].type:
    type: string
    required: false
    since: v2
    enum:
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  services[].operations[].docs[].since:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].updated_at:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].tags:
    type: list
    required: false
    since: v2
  services[].operations[].docs[].owners:
    type: list
    required: false
    since: v2
  services[].operations[].docs[].owners[].id:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum:
    - owner
    - reviewer
    - approver
  services[].operations[].docs[].links:
    type: list
    required: false
    since: v2
  services[].operations[].docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum:
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  services[].operations[].docs[].links[].ref:
    type: string
    required: true
    since: v2
  services[].operations[].docs[].links[].title:
    type: string
    required: false
    since: v2
  services[].operations[].docs[].examples:
    type: list
    required: false
    since: v2
  services[].operations[].docs[].examples[].title:
    type: string
    required: true
    since: v2
  services[].operations[].docs[].examples[].ref:
    type: string
    required: true
    since: v2
  artifacts:
    type: list
    required: false
    since: v2
  artifacts[].id:
    type: string
    required: true
    since: v2
  artifacts[].ref:
    type: string
    required: true
    since: v2
    description: Supports moustache templates resolved from suite context.
  artifacts[].direction:
    type: string
    required: true
    since: v2
    enum:
    - input
    - output
    - bidirectional
  artifacts[].type:
    type: string
    required: false
    since: v2
  artifacts[].inputs:
    type: mapping
    required: false
    since: v2
  artifacts[].outputs:
    type: mapping
    required: false
    since: v2
  artifacts[].options:
    type: mapping
    required: false
    since: v2
  artifacts[].docs:
    type: list
    required: false
    since: v2
  artifacts[].docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  artifacts[].docs[].summary:
    type: string
    required: true
    since: v2
  artifacts[].docs[].audience:
    type: string
    required: true
    since: v2
  artifacts[].docs[].status:
    type: string
    required: true
    since: v2
    enum:
    - draft
    - active
    - deprecated
    - retired
  artifacts[].docs[].description:
    type: string
    required: false
    since: v2
  artifacts[].docs[].type:
    type: string
    required: false
    since: v2
    enum:
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  artifacts[].docs[].since:
    type: string
    required: false
    since: v2
  artifacts[].docs[].updated_at:
    type: string
    required: false
    since: v2
  artifacts[].docs[].tags:
    type: list
    required: false
    since: v2
  artifacts[].docs[].owners:
    type: list
    required: false
    since: v2
  artifacts[].docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  artifacts[].docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum:
    - owner
    - reviewer
    - approver
  artifacts[].docs[].links:
    type: list
    required: false
    since: v2
  artifacts[].docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum:
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  artifacts[].docs[].links[].ref:
    type: string
    required: true
    since: v2
  artifacts[].docs[].links[].title:
    type: string
    required: false
    since: v2
  artifacts[].docs[].examples:
    type: list
    required: false
    since: v2
  artifacts[].docs[].examples[].title:
    type: string
    required: true
    since: v2
  artifacts[].docs[].examples[].ref:
    type: string
    required: true
    since: v2
  exports:
    type: list
    required: false
    since: v2
  exports[].as:
    type: string
    required: true
    since: v2
    description: Required function export symbol name.
  exports[].from:
    type: string
    required: true
    since: v2
    enum:
    - assert.function
    description: Required function export source.
  exports[].path:
    type: string
    required: true
    since: v2
    description: Required function export path.
  exports[].params:
    type: list
    required: false
    since: v2
    description: Optional ordered function parameter names.
  exports[].required:
    type: bool
    required: false
    since: v2
    description: Optional function export requirement flag.
  exports[].docs:
    type: list
    required: false
    since: v2
  exports[].docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  exports[].docs[].summary:
    type: string
    required: true
    since: v2
  exports[].docs[].audience:
    type: string
    required: true
    since: v2
  exports[].docs[].status:
    type: string
    required: true
    since: v2
    enum:
    - draft
    - active
    - deprecated
    - retired
  exports[].docs[].description:
    type: string
    required: false
    since: v2
  exports[].docs[].type:
    type: string
    required: false
    since: v2
    enum:
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  exports[].docs[].since:
    type: string
    required: false
    since: v2
  exports[].docs[].updated_at:
    type: string
    required: false
    since: v2
  exports[].docs[].tags:
    type: list
    required: false
    since: v2
  exports[].docs[].owners:
    type: list
    required: false
    since: v2
  exports[].docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  exports[].docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum:
    - owner
    - reviewer
    - approver
  exports[].docs[].links:
    type: list
    required: false
    since: v2
  exports[].docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum:
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  exports[].docs[].links[].ref:
    type: string
    required: true
    since: v2
  exports[].docs[].links[].title:
    type: string
    required: false
    since: v2
  exports[].docs[].examples:
    type: list
    required: false
    since: v2
  exports[].docs[].examples[].title:
    type: string
    required: true
    since: v2
  exports[].docs[].examples[].ref:
    type: string
    required: true
    since: v2
  contracts:
    type: mapping
    required: true
    since: v2
  contracts.clauses:
    type: list
    required: true
    since: v2
  contracts.clauses[].id:
    type: string
    required: true
    since: v2
  title:
    type: string
    required: false
    since: v2
  purpose:
    type: string
    required: false
    since: v2
  docs:
    type: list
    required: false
    since: v2
  docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  docs[].summary:
    type: string
    required: true
    since: v2
  docs[].audience:
    type: string
    required: true
    since: v2
  docs[].status:
    type: string
    required: true
    since: v2
    enum: *id001
  docs[].description:
    type: string
    required: false
    since: v2
  docs[].type:
    type: string
    required: false
    since: v2
    enum: *id002
  docs[].since:
    type: string
    required: false
    since: v2
  docs[].updated_at:
    type: string
    required: false
    since: v2
  docs[].tags:
    type: list
    required: false
    since: v2
  docs[].owners:
    type: list
    required: false
    since: v2
  docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum: *id003
  docs[].links:
    type: list
    required: false
    since: v2
  docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum: *id004
  docs[].links[].ref:
    type: string
    required: true
    since: v2
  docs[].links[].title:
    type: string
    required: false
    since: v2
  docs[].examples:
    type: list
    required: false
    since: v2
  docs[].examples[].title:
    type: string
    required: true
    since: v2
  docs[].examples[].ref:
    type: string
    required: true
    since: v2
  domain:
    type: string
    required: false
    since: v2
  contracts.clauses[].title:
    type: string
    required: false
    since: v2
  contracts.clauses[].purpose:
    type: string
    required: false
    since: v2
  contracts.clauses[].domain:
    type: string
    required: false
    since: v2
  contracts.clauses[].docs:
    type: list
    required: false
    since: v2
  contracts.clauses[].docs[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for documentation entry. Not reference identity.
  contracts.clauses[].docs[].summary:
    type: string
    required: true
    since: v2
  contracts.clauses[].docs[].audience:
    type: string
    required: true
    since: v2
  contracts.clauses[].docs[].status:
    type: string
    required: true
    since: v2
    enum:
    - draft
    - active
    - deprecated
    - retired
  contracts.clauses[].docs[].description:
    type: string
    required: false
    since: v2
  contracts.clauses[].docs[].type:
    type: string
    required: false
    since: v2
    enum:
    - overview
    - reference
    - howto
    - policy
    - contract
    - changelog
  contracts.clauses[].docs[].since:
    type: string
    required: false
    since: v2
  contracts.clauses[].docs[].updated_at:
    type: string
    required: false
    since: v2
  contracts.clauses[].docs[].tags:
    type: list
    required: false
    since: v2
  contracts.clauses[].docs[].owners:
    type: list
    required: false
    since: v2
  contracts.clauses[].docs[].owners[].id:
    type: string
    required: false
    since: v2
    description: Optional metadata id for docs owner entry. Not reference identity.
  contracts.clauses[].docs[].owners[].role:
    type: string
    required: true
    since: v2
    enum:
    - owner
    - reviewer
    - approver
  contracts.clauses[].docs[].links:
    type: list
    required: false
    since: v2
  contracts.clauses[].docs[].links[].rel:
    type: string
    required: true
    since: v2
    enum:
    - see_also
    - depends_on
    - implements
    - supersedes
    - replaced_by
  contracts.clauses[].docs[].links[].ref:
    type: string
    required: true
    since: v2
  contracts.clauses[].docs[].links[].title:
    type: string
    required: false
    since: v2
  contracts.clauses[].docs[].examples:
    type: list
    required: false
    since: v2
  contracts.clauses[].docs[].examples[].title:
    type: string
    required: true
    since: v2
  contracts.clauses[].docs[].examples[].ref:
    type: string
    required: true
    since: v2
  contracts.clauses[].when:
    type: mapping
    required: false
    since: v2
  contracts.clauses[].when.required:
    type: list
    required: false
    since: v2
  contracts.clauses[].when.optional:
    type: list
    required: false
    since: v2
  contracts.clauses[].when.fail:
    type: list
    required: false
    since: v2
  contracts.clauses[].when.complete:
    type: list
    required: false
    since: v2
  contracts.clauses[].bindings:
    type: mapping
    required: false
    since: v2
    description: Contract-local binding declarations using mapping form
      (`contracts.clauses[].bindings.defaults` + `contracts.clauses[].bindings.rows[]`).
  contracts.clauses[].bindings.defaults:
    type: mapping
    required: false
    since: v2
  contracts.clauses[].bindings.defaults.service:
    type: string
    required: false
    since: v2
    description: Optional default binding service entry id (`services[].operations[].id`).
  contracts.clauses[].bindings.defaults.import:
    type: string
    required: false
    since: v2
    description: Optional default binding import name.
  contracts.clauses[].bindings.defaults.mode:
    type: string
    required: false
    since: v2
    enum:
    - merge
    - override
  contracts.clauses[].bindings.defaults.predicates:
    type: list
    required: false
    since: v2
  contracts.clauses[].bindings.rows:
    type: list
    required: false
    since: v2
    description: Binding rows when using mapping-form contract bindings.
  contracts.clauses[].bindings.rows[].id:
    type: string
    required: true
    since: v2
  contracts.clauses[].bindings.rows[].service:
    type: string
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].import:
    type: string
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].inputs:
    type: list
    required: false
    since: v2
    description: Supports canonical mapping rows (`from`, optional `as`) and
      compact list[string] aliases normalized to `{from: <id>}`. Mixed item
      kinds in one list are invalid.
  contracts.clauses[].bindings.rows[].inputs[].from:
    type: string
    required: true
    since: v2
  contracts.clauses[].bindings.rows[].inputs[].as:
    type: string
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].outputs:
    type: list
    required: false
    since: v2
    description: Supports canonical mapping rows (`to`, optional `as`,
      optional `path`) and compact list[string] aliases normalized to
      `{to: <id>}`. Mixed item kinds in one list are invalid.
  contracts.clauses[].bindings.rows[].outputs[].to:
    type: string
    required: true
    since: v2
  contracts.clauses[].bindings.rows[].outputs[].as:
    type: string
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].outputs[].path:
    type: string
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].predicates:
    type: list
    required: false
    since: v2
  contracts.clauses[].bindings.rows[].mode:
    type: string
    required: false
    since: v2
    enum:
    - merge
    - override
  contracts.clauses[].asserts:
    type: mapping
    required: true
    since: v2
  contracts.clauses[].expect:
    type: mapping
    required: false
    since: v2
  contracts.clauses[].expect.portable:
    type: mapping
    required: false
    since: v2
  contracts.clauses[].expect.portable.status:
    type: string
    required: false
    since: v2
  contracts.clauses[].expect.portable.category:
    type: string
    required: false
    since: v2
  contracts.clauses[].expect.portable.message_tokens:
    type: list
    required: false
    since: v2
  contracts.clauses[].expect.overrides:
    type: list
    required: false
    since: v2
  contracts.clauses[].expect.overrides[].runner:
    type: string
    required: true
    since: v2
  contracts.clauses[].expect.overrides[].status:
    type: string
    required: false
    since: v2
  contracts.clauses[].expect.overrides[].category:
    type: string
    required: false
    since: v2
  contracts.clauses[].expect.overrides[].message_tokens:
    type: list
    required: false
    since: v2
  contracts.clauses[].requires:
    type: mapping
    required: false
    since: v2
    description: Optional contract-level requirement metadata.
