version: 2
id: schema.registry.v2.harness
type: harness
fields:
  harness:
    type: mapping
    required: true
    since: v2
    description: Suite-level execution harness binding.
  harness.type:
    type: string
    required: true
    since: v2
    description: Harness type (for example unit.test).
  harness.profile:
    type: string
    required: true
    since: v2
    description: Harness execution profile.
  harness.config:
    type: mapping
    required: false
    since: v2
    description: Harness runtime configuration mapping.
  adapters:
    type: list
    required: false
    since: v2
    description: Optional suite-level adapter blocks; required when services
      are declared.
  adapters[].type:
    type: string
    required: true
    since: v2
    description: Adapter type token resolved by service_contract_catalog_v1.
  adapters[].defaults:
    type: mapping
    required: false
    since: v2
    description: Optional defaults merged into each `adapters[].actions[]` row.
  adapters[].defaults.config:
    type: mapping
    required: false
    since: v2
    description: Default adapter runtime configuration. External locators must be
      routed through artifact ids (`*_artifact_id`/`*_artifact_ids`);
      direct locator keys are invalid.
  adapters[].actions:
    type: list
    required: true
    since: v2
  adapters[].actions[].id:
    type: string
    required: true
    since: v2
    description: Concrete adapter action id.
  adapters[].actions[].profile:
    type: string
    required: false
    since: v2
  adapters[].actions[].config:
    type: mapping
    required: false
    since: v2
  adapters[].actions[].imports:
    type: list
    required: false
    description: Canonical adapter callable import rows (`names`, optional `as`).
    since: v2
  adapters[].actions[].imports[].names:
    type: list
    required: true
    since: v2
    description: Adapter import names bound as adapter_action_id.import_name.
  services:
    type: list
    required: false
    since: v2
    description: Contract-facing service composition entries.
  services[].id:
    type: string
    required: true
    since: v2
  services[].consumes:
    type: list
    required: true
    since: v2
    description: Adapter action ids consumed by this service.
  services[].exposes:
    type: list
    required: false
    since: v2
  services[].exposes[].names:
    type: list
    required: true
    since: v2
  services[].exposes[].as:
    type: mapping
    required: false
    since: v2
  services[].bindings:
    type: mapping
    required: false
    since: v2
  services[].bindings.<name>.adapter_action:
    type: string
    required: true
    since: v2
  services[].bindings.<name>.adapter_import:
    type: string
    required: true
    since: v2
  adapters[].actions[].imports[].as:
    type: mapping
    required: false
    since: v2
