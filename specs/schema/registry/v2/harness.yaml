version: 2
id: schema.registry.v2.harness
type: harness
fields:
  harness:
    type: mapping
    required: true
    since: v2
    description: Suite-level execution harness binding.
  harness.type:
    type: string
    required: true
    since: v2
    description: Harness type (for example unit.test).
  harness.profile:
    type: string
    required: true
    since: v2
    description: Harness execution profile.
  harness.config:
    type: mapping
    required: false
    since: v2
    description: Harness runtime configuration mapping.
  services:
    type: list
    required: false
    since: v2
    description: Optional suite-level service type blocks; required when service
      imports or contract bindings are used.
  services[].type:
    type: string
    required: true
    since: v2
    description: Service type token resolved by service_contract_catalog_v1.
  services[].defaults:
    type: mapping
    required: false
    since: v2
    description: Optional defaults merged into each `services[].operations[]` row.
  services[].defaults.config:
    type: mapping
    required: false
    since: v2
    description: Default service runtime configuration. External locators must be
      routed through artifact ids (`*_artifact_id`/`*_artifact_ids`);
      direct locator keys are invalid.
  services[].operations:
    type: list
    required: true
    since: v2
  services[].operations[].id:
    type: string
    required: true
    since: v2
    description: Concrete service instance id used by bindings/imports.
  services[].operations[].mode:
    type: string
    required: false
    since: v2
  services[].operations[].config:
    type: mapping
    required: false
    since: v2
  services[].operations[].imports:
    type: list
    required: false
    description: Canonical service callable import rows (`names`, optional `as`).
    since: v2
  services[].operations[].imports[].names:
    type: list
    required: true
    since: v2
    description: Service import names bound as service_id.import_name.
  services[].operations[].imports[].as:
    type: mapping
    required: false
    since: v2
