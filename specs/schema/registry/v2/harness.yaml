version: 2
id: schema.registry.v2.harness
type: harness
fields:
  harness:
    type: mapping
    required: true
    since: v2
    description: Suite-level execution harness binding.
  harness.type:
    type: string
    required: true
    since: v2
    description: Harness type (for example unit.test).
  harness.profile:
    type: string
    required: true
    since: v2
    description: Harness execution profile.
  harness.config:
    type: mapping
    required: false
    since: v2
    description: Harness runtime configuration mapping.
  services:
    type: mapping
    required: false
    since: v2
    description: Optional suite-level service bindings with defaults and 
      entries; required when service imports or contract bindings are used.
  services.defaults:
    type: mapping
    required: false
    since: v2
    description: Optional defaults merged into each services.actions[] row.
  services.actions:
    type: list
    required: true
    since: v2
    description: Non-empty service entries for concrete runtime hooks.
  services.actions[].config:
    type: mapping
    required: false
    since: v2
    description: Service runtime configuration. External locators must be routed
      through artifact ids (`*_artifact_id`/`*_artifact_ids`); direct locator
      keys are invalid.
  services.actions[].id:
    type: string
    required: true
    since: v2
  services.actions[].type:
    type: string
    required: false
    since: v2
    description: Service type resolved by service_contract_catalog_v1.
  services.actions[].imports:
    type: list
    required: false
    description: Service callable imports. Supports compact list[string] alias
      (preferred) and canonical list[mapping] (`names`, optional `as`). Mixed
      item kinds are invalid. Alias grammar and normalization are defined in
      `/specs/schema/registry/v2/aliases.yaml`.
    since: v2
  services.actions[].imports[].names:
    type: list
    required: true
    since: v2
    description: Service import names bound as service_id.import_name.
  services.actions[].imports[].as:
    type: mapping
    required: false
    since: v2
