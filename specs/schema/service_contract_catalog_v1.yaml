version: 1
title: service_contract_catalog_v1
kind: service_contract_catalog
unknown_service_type_behavior: hard_fail
services:
- type: assert.check
  allowed_profiles:
  - text.file
  - cli.run
  - api.http
  - docs.generate
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.assert.
  - assert.
  allowed_io:
  - input
  available_imports_by_profile:
    text.file:
    - pipe_identity
    - assert_truth
    cli.run:
    - pipe_identity
    - assert_truth
    api.http:
    - pipe_identity
    - assert_truth
    docs.generate:
    - pipe_identity
    - assert_truth
  import_validation_scope: type_profile
- type: assert.export
  allowed_profiles:
  - contract.export
  - spec.export
  required_config_keys: []
  allowed_function_op_prefixes:
  - assert.function
  allowed_io:
  - output
  available_imports_by_profile:
    contract.export:
    - export_symbol
    spec.export:
    - export_symbol
  import_validation_scope: type_profile
- type: ops.job
  allowed_profiles:
  - job.dispatch
  - report.generate
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.job.
  allowed_io:
  - input
  - output
  - io
  available_imports_by_profile:
    job.dispatch:
    - run_job
    - report_job
    report.generate:
    - run_job
    - report_job
  import_validation_scope: type_profile
- type: io.http
  allowed_profiles:
  - api.http
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.http.
  - domain.http.
  allowed_io:
  - input
  - output
  - io
  available_imports_by_profile:
    api.http:
    - get_json
    - post_json
  import_validation_scope: type_profile
- type: io.mysql
  allowed_profiles:
  - mysql.query
  - mysql.migrate
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.mysql.
  - domain.mysql.
  allowed_io:
  - input
  - output
  - io
  available_imports_by_profile:
    mysql.query:
    - query
    - migrate
    mysql.migrate:
    - query
    - migrate
  import_validation_scope: type_profile
- type: io.fs
  allowed_profiles:
  - fs.readwrite
  - text.file
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.fs.
  - domain.fs.
  allowed_io:
  - input
  - output
  - io
  available_imports_by_profile:
    fs.readwrite:
    - read_text
    - write_text
    text.file:
    - read_text
    - write_text
  import_validation_scope: type_profile
- type: io.system
  allowed_profiles:
  - system.exec
  - cli.run
  required_config_keys: []
  allowed_function_op_prefixes:
  - ops.proc.
  - ops.time.
  - domain.system.
  allowed_io:
  - input
  - output
  - io
  available_imports_by_profile:
    system.exec:
    - exec
    - now
    cli.run:
    - exec
    - now
  import_validation_scope: type_profile
binding_runtime_contract:
  execution_timing: once_per_contract_before_predicates
  io_transport: artifact_ids_only
  default_service_resolution:
  - match_services_defaults_type_profile
  - fallback_single_services_entry
  - hard_fail_on_ambiguity
  required_mappings:
    inputs: bindings[].inputs[].from -> artifact.imports[].id
    outputs: bindings[].outputs[].to -> artifact.exports[].id
  service_config_usage: static_only_no_runtime_payload_transport
  bound_symbol_format: service_id.import_name
  binding_import_validation:
  - binding_import_must_be_declared_on_service_entry
  - declared_import_must_exist_in_available_imports_by_profile
import_declaration_shape_v2:
  services.entries[].imports: list[mapping]|list[string]
  services.entries[].imports[].names: list[string]
  services.entries[].imports[].as: mapping(optional)
  services.entries[].imports_compact: list[string] expands to one canonical
    row `{names:[...]}` (no aliasing support in compact form)
  services.entries[].imports_mixed_item_kinds: invalid
  legacy_object_form: invalid
