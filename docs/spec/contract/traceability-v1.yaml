version: 1
title: Spec Runner Contract Traceability
links:
  - rule_id: CLI_RUN_ENTRYPOINT_REQUIRED
    policy_ref: docs/spec/contract/policy-v1.yaml#CLI_RUN_ENTRYPOINT_REQUIRED
    contract_refs:
      - docs/spec/contract/04-harness.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-CLI-001
    unit_test_refs:
      - tools/spec_runner/tests/test_harness_cli_run_unit.py
      - tools/spec_runner/tests/test_conformance_runner_unit.py
    implementation_refs:
      - spec_runner/harnesses/cli_run.py
    notes: "Entry point requirement is covered by conformance seed and unit tests."

  - rule_id: CLI_RUN_ENTRYPOINT_ENV_FALLBACK
    policy_ref: docs/spec/contract/policy-v1.yaml#CLI_RUN_ENTRYPOINT_ENV_FALLBACK
    contract_refs:
      - docs/spec/contract/04-harness.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids: []
    unit_test_refs: []
    implementation_refs:
      - spec_runner/harnesses/cli_run.py
    notes: "Implementation SHOULD; not required for conformance."

  - rule_id: CLI_RUN_CONFORMANCE_EXPLICIT_ENTRYPOINT
    policy_ref: docs/spec/contract/policy-v1.yaml#CLI_RUN_CONFORMANCE_EXPLICIT_ENTRYPOINT
    contract_refs:
      - docs/spec/contract/04-harness.md
      - docs/spec/contract/06-conformance.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-CLI-001
      - SRCONF-CLI-002
    unit_test_refs:
      - tools/spec_runner/tests/test_contract_governance_unit.py
      - tools/spec_runner/tests/test_conformance_runner_unit.py
    implementation_refs: []
    notes: "Conformance seed fixtures include explicit harness.entrypoint values."

  - rule_id: CLI_RUN_CONFORMANCE_NO_ENV_DEPENDENCY
    policy_ref: docs/spec/contract/policy-v1.yaml#CLI_RUN_CONFORMANCE_NO_ENV_DEPENDENCY
    contract_refs:
      - docs/spec/contract/04-harness.md
      - docs/spec/contract/06-conformance.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-CLI-001
      - SRCONF-CLI-002
    unit_test_refs:
      - tools/spec_runner/tests/test_contract_governance_unit.py
      - tools/spec_runner/tests/test_conformance_runner_unit.py
    implementation_refs: []
    notes: "Conformance fixtures are explicit and do not require env fallback."

  - rule_id: ASSERT_HEALTH_MODE_VALID_VALUES
    policy_ref: docs/spec/contract/policy-v1.yaml#ASSERT_HEALTH_MODE_VALID_VALUES
    contract_refs:
      - docs/spec/contract/02-case-shape.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-AH-003
    unit_test_refs:
      - tools/spec_runner/tests/test_assertion_health_unit.py
    implementation_refs:
      - spec_runner/assertion_health.py
    notes: "Value validation and mode parsing are enforced in assertion_health."

  - rule_id: ASSERT_HEALTH_GLOBAL_AND_PER_CASE_POLICY
    policy_ref: docs/spec/contract/policy-v1.yaml#ASSERT_HEALTH_GLOBAL_AND_PER_CASE_POLICY
    contract_refs:
      - docs/spec/contract/00-design-goals.md
      - docs/spec/contract/02-case-shape.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-AH-001
      - SRCONF-AH-002
      - SRCONF-AH-004
    unit_test_refs:
      - tools/spec_runner/tests/test_assertion_health_unit.py
      - tools/spec_runner/tests/test_harness_cli_run_unit.py
      - tools/spec_runner/tests/test_harness_text_file_unit.py
    implementation_refs:
      - spec_runner/assertion_health.py
      - spec_runner/harnesses/cli_run.py
      - spec_runner/harnesses/text_file.py
    notes: "Global env policy plus per-case override implemented for Python harnesses."

  - rule_id: ASSERT_HEALTH_REDUNDANT_BRANCH_DIAGNOSTIC
    policy_ref: docs/spec/contract/policy-v1.yaml#ASSERT_HEALTH_REDUNDANT_BRANCH_DIAGNOSTIC
    contract_refs:
      - docs/spec/contract/00-design-goals.md
      - docs/spec/contract/03-assertions.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-AH-005
    unit_test_refs:
      - tools/spec_runner/tests/test_assertion_health_unit.py
      - tools/spec_runner/tests/test_harness_cli_run_unit.py
    implementation_refs:
      - spec_runner/assertion_health.py
      - spec_runner/harnesses/cli_run.py
    notes: "Python emits AH004 for redundant sibling branches."

  - rule_id: ASSERT_HEALTH_NON_PORTABLE_REGEX_DIAGNOSTIC
    policy_ref: docs/spec/contract/policy-v1.yaml#ASSERT_HEALTH_NON_PORTABLE_REGEX_DIAGNOSTIC
    contract_refs:
      - docs/spec/contract/00-design-goals.md
      - docs/spec/contract/03-assertions.md
      - docs/spec/contract/03a-regex-portability-v1.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids:
      - SRCONF-AH-006
    unit_test_refs:
      - tools/spec_runner/tests/test_assertion_health_unit.py
      - tools/spec_runner/tests/test_conformance_runner_unit.py
    implementation_refs:
      - spec_runner/assertion_health.py
      - spec_runner/harnesses/text_file.py
      - spec_runner/harnesses/cli_run.py
    notes: "Python emits AH005 for non-portable regex constructs."

  - rule_id: DOC_NORMATIVE_PAGE_TRACEABILITY
    policy_ref: docs/spec/contract/policy-v1.yaml#DOC_NORMATIVE_PAGE_TRACEABILITY
    contract_refs:
      - docs/spec/contract/00-design-goals.md
      - docs/spec/contract/versioning.md
      - docs/spec/contract/01-discovery.md
      - docs/spec/contract/02-case-shape.md
      - docs/spec/contract/03-assertions.md
      - docs/spec/contract/03a-regex-portability-v1.md
      - docs/spec/contract/04-harness.md
      - docs/spec/contract/05-errors.md
      - docs/spec/contract/06-conformance.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids: []
    unit_test_refs:
      - tools/spec_runner/tests/test_contract_governance_unit.py
    implementation_refs:
      - spec_runner/contract_governance.py
    notes: "Governance enforces traceability coverage across normative contract pages."

  - rule_id: DOC_REGEX_PROFILE_LINKAGE
    policy_ref: docs/spec/contract/policy-v1.yaml#DOC_REGEX_PROFILE_LINKAGE
    contract_refs:
      - docs/spec/contract/03-assertions.md
      - docs/spec/contract/03a-regex-portability-v1.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids: []
    unit_test_refs:
      - tools/spec_runner/tests/test_contract_governance_unit.py
    implementation_refs:
      - spec_runner/contract_governance.py
    notes: "Governance checks profile references across assertion, schema, and policy docs."

  - rule_id: DOC_ASSERTION_OPERATOR_DOC_SYNC
    policy_ref: docs/spec/contract/policy-v1.yaml#DOC_ASSERTION_OPERATOR_DOC_SYNC
    contract_refs:
      - docs/spec/contract/03-assertions.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids: []
    unit_test_refs:
      - tools/spec_runner/tests/test_contract_governance_unit.py
    implementation_refs:
      - spec_runner/contract_governance.py
    notes: "Governance checks synchronized core operator tokens between docs."

  - rule_id: CONFORMANCE_EXPECT_OVERLAY_RESOLUTION
    policy_ref: docs/spec/contract/policy-v1.yaml#CONFORMANCE_EXPECT_OVERLAY_RESOLUTION
    contract_refs:
      - docs/spec/contract/06-conformance.md
    schema_refs:
      - docs/spec/schema/schema-v1.md
    conformance_case_ids: []
    unit_test_refs:
      - tools/spec_runner/tests/test_conformance_runner_unit.py
      - tools/spec_runner/tests/test_php_conformance_subset_unit.py
    implementation_refs:
      - spec_runner/conformance.py
    notes: "Conformance expectations resolve portable baseline with implementation overlays."
